<div class="panel panel-default" id="searchResults">
    <div class="table-responsive">
	    <table class="table table-striped table-bordered table-condensed">
	        <thead>
	            <tr>
	                <th>Database instance</th><th>Cluster name</th>
	            </tr>
	        </thead>
	        <tbody>
	        </tbody>
	    </table>
    </div>
</div>


<script>
	function currentSearchString() {
	    return "{{.searchString}}";
	}
	$(document).ready(function () {
        showLoader();
        $.get("/api/search/"+currentSearchString(), function (instances) {
            $.get("/api/maintenance",
                function (maintenanceInstances) {
                    displaySearchInstances(instances,
                        maintenanceInstances);
                }, "json");
        }, "json");
        function displaySearchInstances(instances, maintenanceInstances) {
            hideLoader();
        	instances.forEach(function (instance) {
        		$("#searchResults table tbody").append('<tr><td>'
                        + instance.Key.Hostname+':'+instance.Key.Port
                        + '<div class="pull-right">' + instance.Version+' '+instance.Binlog_format + '</div>'
        			+ '</td><td><a href="/web/cluster/'+instance.ClusterName+'">'
        				+ instance.ClusterName
        			+ '</a></td></tr>')
        	});        	
        }
    });	
</script>
